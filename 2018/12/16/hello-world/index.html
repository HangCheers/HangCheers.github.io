<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="å…¥é—¨,">





  <link rel="alternate" href="/atmol.xml" title="Hello,World" type="application/atom+xml">






<meta name="description" content="Inceptionç³»åˆ—æœ‰å››ç¯‡é‡è¦çš„paperï¼Œåˆ†åˆ«æ˜¯ï¼šGoing Deeper with Convolutionsã€Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shifã€Rethinking the Inception Architecture for Compute">
<meta name="keywords" content="å…¥é—¨">
<meta property="og:type" content="article">
<meta property="og:title" content="Inception">
<meta property="og:url" content="http://blog.hangcheers.cn/2018/12/16/hello-world/index.html">
<meta property="og:site_name" content="Hello,World">
<meta property="og:description" content="Inceptionç³»åˆ—æœ‰å››ç¯‡é‡è¦çš„paperï¼Œåˆ†åˆ«æ˜¯ï¼šGoing Deeper with Convolutionsã€Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shifã€Rethinking the Inception Architecture for Compute">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://camo.githubusercontent.com/842ee01499b72c4d581c3ceaa3c5ff1bba52795a/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f323030302f312a6171347463426c3974355a33366b5444655a534f48412e706e67">
<meta property="og:image" content="https://camo.githubusercontent.com/af3901794f951a95a46683687fa7a60f3d0f45d6/687474703a2f2f63733233316e2e6769746875622e696f2f6173736574732f636e6e2f6465707468636f6c2e6a706567">
<meta property="og:image" content="https://mohitjainweb.files.wordpress.com/2018/06/googlenet-architecture-showing-the-side-connection.png?w=700">
<meta property="og:image" content="https://camo.githubusercontent.com/f038213d9fa7c4c47ca36d7e51820f68462285d2/68747470733a2f2f696d672d626c6f672e6373646e2e6e65742f32303137303631323131303435383434343f77617465726d61726b2f322f746578742f6148523063446f764c324a736232637559334e6b626935755a585176625746796332706f5957383d2f666f6e742f3561364c354c32542f666f6e7473697a652f3430302f66696c6c2f49304a42516b46434d413d3d2f646973736f6c76652f37302f677261766974792f536f75746845617374">
<meta property="og:image" content="https://tse2.mm.bing.net/th?id=OIP.lEHUl5w_rweJSb-FpNdKeAHaFl&pid=Api">
<meta property="og:image" content="http://davidstutz.de/wordpress/wp-content/uploads/2017/03/inception_arch_3.png">
<meta property="og:image" content="https://camo.githubusercontent.com/6766d20252ed7afb1b3e17d92f38020da2328f5e/68747470733a2f2f696d672d626c6f672e6373646e2e6e65742f32303137303232303230313132383933383f77617465726d61726b2f322f746578742f6148523063446f764c324a736232637559334e6b626935755a58517664334e77596d453d2f666f6e742f3561364c354c32542f666f6e7473697a652f3430302f66696c6c2f49304a42516b46434d413d3d2f646973736f6c76652f37302f677261766974792f43656e746572">
<meta property="og:image" content="https://camo.githubusercontent.com/8c540abfc8714b56027ee7545f56967263c1b74a/68747470733a2f2f706963312e7a68696d672e636f6d2f76322d34393234373065313638376531653534373135366565393033363462346636305f722e6a7067">
<meta property="og:image" content="https://camo.githubusercontent.com/ade4e987c83d1aa34417a65032bfa073112ebb39/68747470733a2f2f706963322e7a68696d672e636f6d2f38302f76322d64363535373237343964313535336639636366353062636136353961366666645f68642e6a7067">
<meta property="og:updated_time" content="2018-12-16T05:10:30.439Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Inception">
<meta name="twitter:description" content="Inceptionç³»åˆ—æœ‰å››ç¯‡é‡è¦çš„paperï¼Œåˆ†åˆ«æ˜¯ï¼šGoing Deeper with Convolutionsã€Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shifã€Rethinking the Inception Architecture for Compute">
<meta name="twitter:image" content="https://camo.githubusercontent.com/842ee01499b72c4d581c3ceaa3c5ff1bba52795a/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f323030302f312a6171347463426c3974355a33366b5444655a534f48412e706e67">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.hangcheers.cn/2018/12/16/hello-world/">





  <title>Inception | Hello,World</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-141036651-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    
    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hello,World</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.hangcheers.cn/2018/12/16/hello-world/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hang Yang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello,World">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Inception</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-12-16T08:13:23+08:00">
                2018-12-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">æ›´æ–°äº&#58;</span>
              
              <time title="æ›´æ–°äº" itemprop="dateModified" datetime="2018-12-16T13:10:30+08:00">
                2018-12-16
              </time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/è®ºæ–‡ç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">è®ºæ–‡ç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> é˜…è¯»æ•°
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">å­—æ•°ç»Ÿè®¡&#58;</span>
                
                <span title="å­—æ•°ç»Ÿè®¡">
                  4.2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
                
                <span title="é˜…è¯»æ—¶é•¿">
                  17
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <a id="more"></a>
<p>Inceptionç³»åˆ—æœ‰å››ç¯‡é‡è¦çš„paperï¼Œåˆ†åˆ«æ˜¯ï¼š<a href="https://arxiv.org/abs/1409.4842" target="_blank" rel="noopener">Going Deeper with Convolutions</a>ã€<br><a href="https://arxiv.org/abs/1502.03167" target="_blank" rel="noopener">Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shif</a>ã€<a href="https://arxiv.org/abs/1512.00567" target="_blank" rel="noopener">Rethinking the Inception Architecture for Computer Vision</a>ã€<a href="https://arxiv.org/abs/1602.07261" target="_blank" rel="noopener">Inception-v4</a><br>åœ¨æ­¤ï¼Œä¾æ¬¡é˜…è¯»å¹¶åšç¬”è®°ã€‚</p>
<h2 id="GoogleNet"><a href="#GoogleNet" class="headerlink" title="GoogleNet"></a>GoogleNet</h2><h3 id="Introduction-amp-Motivation"><a href="#Introduction-amp-Motivation" class="headerlink" title="Introduction &amp; Motivation"></a>Introduction &amp; Motivation</h3><p><a href="https://arxiv.org/abs/1409.4842" target="_blank" rel="noopener">Going Deeper with Convolutions</a> é¦–æ¬¡æå‡ºäº†ã€Œ<strong>Inception</strong>ã€æ¨¡å—ä½œä¸ºç½‘ç»œæ„æ¶ï¼Œ<br>è¯¥ç½‘ç»œæ„æ¶ä¹Ÿæ˜¯åç»­ä½œä¸ºclassificationå’Œdetectionçš„base networkçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<blockquote>
<p>we introduce a new level of organization in the form of the â€œInception moduleâ€ and also in a more direct sense of increased<br>network depth.  </p>
</blockquote>
<p>ç½‘ç»œçš„sizeä¸»è¦ä»ä¸¤æ–¹é¢è¿›è¡Œè€ƒè™‘ï¼šdepth - the number of levels - of the network å’Œ width - the number of units at each levelã€‚ã€ŒåŠ æ·±ç½‘ç»œdepthã€ã€ã€Œè°ƒèŠ‚è¶…å‚æ•°ã€å¯ä»¥åœ¨recognitionå’Œobject detectionå–å¾—æ›´å¥½çš„æ•ˆæœã€‚ä½†æ˜¯ç½‘ç»œçš„sizeè¿‡å¤§ï¼Œä¼šç›´æ¥å½±å“è¿è¡Œçš„æ€§èƒ½ã€‚å°±åƒä¸€ä¸ªäººè¿‡èƒ–ï¼Œä¼šç›´æ¥å½±å“èº«ä½“å¥åº·ã€‚å½“ç½‘ç»œçš„sizeè¿‡å¤§çš„æ—¶å€™ï¼Œå‚æ•°#paramtersè¿‡å¤šï¼Œæ¶ˆè€—çš„è®¡ç®—èµ„æºå°±è¶Šå¤šï¼Œæ­¤å¤–ï¼Œç‰¹åˆ«æ˜¯åœ¨labeled exampleså¾ˆæœ‰é™çš„æƒ…å†µä¸‹ï¼Œæ›´å®¹æ˜“å‡ºç°overfittingã€‚ä¸€èˆ¬æ˜¯é‡‡ç”¨ã€Œdropoutã€æˆ–è€…ã€Œregularizationã€ï¼Œå¹¶ä¸”ã€Œè°ƒæ•´è¶…å‚æ•°ã€å’Œã€Œè®¾ç½®å­¦ä¹ ç‡ã€å»é˜²æ­¢è®­ç»ƒè¿‡ç¨‹ä¸­è¿‡æ‹Ÿåˆç°è±¡çš„å‡ºç°ã€‚</p>
<blockquote>
<p>For larger datasets such as Imagenet, deeper architectures are used to get better results and dropout is used to prevent<br>overfitting â€¦â€¦ Since in practice the computational budget is always finite, an efficient distribution of computing resources is preferred to an indiscriminate increase of sizeã€‚  </p>
</blockquote>
<h3 id="Inception-module"><a href="#Inception-module" class="headerlink" title="Inception module"></a>Inception module</h3><p>ä¸Šé¢çš„æ–¹æ³•æŒºå¥½çš„ï¼Œä½†ä¹ŸæŒºè›®çƒ¦çš„ï¼Œæ‰€ä»¥ä½œè€…è¯•å›¾ç»“åˆã€Œæ•°æ®ç»“æ„ã€ç½‘ç»œç»“æ„ã€æ¥è€ƒè™‘ï¼Œå¦‚ä½•è®¾è®¡ä¸€ä¸ªåˆ›æ–°æ€§çš„architectureï¼Œæ¥æ›´å¥½çš„åˆ©ç”¨è®¡ç®—èµ„æºä»¥åŠç¨å¾®æ”¾å¿ƒã€å¤§èƒ†çš„è®¾ç½®å‚æ•°ä¸€äº›?</p>
<p>é¦–å…ˆï¼Œå¼€ä¸ªå°åˆ†æ”¯ï¼Œä»‹ç»ä¸€ä¸‹ã€Œç¨€ç–ç»“æ„ã€çš„ç†è®ºåŸºç¡€ï¼š<strong>HebbianåŸç†</strong>ã€‚ ä½œè€…ä»neuroscienceçš„è§’åº¦å¾—åˆ°äº†å¯å‘ï¼Œæå‡ºäº†ç½‘ç»œç»“æ„çš„åˆ›æ–°ï¼šã€‚<br>è¯¥åŸç†æŒ‡å‡ºï¼šå„ä¸ªç¥ç»å…ƒæ˜¯ç»„åˆæ•ˆåº”ï¼Œé€šè¿‡ç¥ç»çªè§¦è¿›è¡Œä¿¡æ¯çš„ä¼ é€’ï¼Œå¤§è„‘çš®å±‚æ¥æ”¶ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œ<br>ç¥ç»åå°„æ´»åŠ¨çš„æŒç»­ä¸é‡å¤ä¼šå¯¼è‡´ç¥ç»å…ƒè¿æ¥ç¨³å®šæ€§çš„æŒä¹…æå‡ï¼Œå½“ä¸¤ä¸ªç¥ç»å…ƒç»†èƒAå’ŒBè·ç¦»å¾ˆè¿‘ï¼Œå¹¶ä¸”Aå‚ä¸äº†å¯¹Bé‡å¤ã€æŒç»­çš„å…´å¥‹ï¼Œé‚£ä¹ˆæŸäº›ä»£è°¢å˜åŒ–ä¼šå¯¼è‡´Aå°†ä½œä¸ºèƒ½ä½¿Bå…´å¥‹çš„ç»†èƒã€‚</p>
<blockquote>
<p>neurons that fire together, wire together.<br>å°†Fully Connectedå˜ä¸ºç¨€ç–è¿æ¥ï¼ˆsparse connectionï¼‰çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨å¢åŠ ç½‘ç»œæ·±åº¦å’Œå®½åº¦çš„åŒæ—¶å‡å°‘å‚æ•°ä¸ªæ•°ï¼Œ<br>ä½†æ˜¯å¤§éƒ¨åˆ†çš„ç¡¬ä»¶æ˜¯é’ˆå¯¹å¯†é›†çŸ©é˜µè®¡ç®—ä¼˜åŒ–çš„ï¼Œç¨€ç–çŸ©é˜µè™½ç„¶æ•°æ®é‡å˜å°‘ï¼Œä½†è®¡ç®—æ‰€æ¶ˆè€—çš„æ—¶é—´å¾ˆéš¾å‡å°‘ã€‚<br>GoogleNetå¸Œæœ›åšçš„å°±æ˜¯æ—¢ä¿è¯ç½‘ç»œç»“æ„çš„ç¨€ç–æ€§ã€åˆåˆ©ç”¨å¯†é›†çŸ©é˜µçš„é«˜è®¡ç®—æ€§èƒ½ã€‚</p>
</blockquote>
<p>GoogleNetçš„æ ¸å¿ƒæ˜¯Inception moduleï¼Œè€ŒInceptionç›¸å½“äºä¸€ä¸ªConvolutional building blockï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå±€éƒ¨ç¨€ç–æœ€ä¼˜è§£çš„ç½‘ç»œæ„æ¶ï¼Œç„¶åæˆ‘ä»¬åœ¨<br>ç©ºé—´ä¸Šåšå †å ã€‚ä¸‹é¢æˆ‘ä»¬ç»“åˆè®ºæ–‡çš„æ’å›¾æ¥ä»”ç»†åˆ†æä¸€ä¸‹Inception moduleã€‚å›¾aæ˜¯åŸå§‹çš„Inception moduleï¼Œå›¾bæ˜¯å€Ÿé‰´äº†NINï¼ˆNetwork In Networkï¼‰<br>å¼•å…¥1x1çš„å·ç§¯æ“ä½œï¼Œæ”¹è¿›åçš„Inception moduleã€‚</p>
<blockquote>
<p>Our network will be built from convolutional building blocks.<br>All we need is to find the <strong>optimal local construction</strong> and to repeat it spatially.   </p>
</blockquote>
<p><img src="https://camo.githubusercontent.com/842ee01499b72c4d581c3ceaa3c5ff1bba52795a/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f323030302f312a6171347463426c3974355a33366b5444655a534f48412e706e67" alt="1">  </p>
<p>è¾“å…¥æœ‰å››ä¸ªåˆ†æ”¯ï¼Œä½¿ç”¨å¤šä¸ªå°ºåº¦ï¼ˆ1x1æˆ–3x3æˆ–5x5ï¼‰çš„å·ç§¯å’Œæ± åŒ–è¿›è¡Œç‰¹å¾æå–ã€Œç›¸å½“äºå°†ç¨€ç–çŸ©é˜µåˆ†è§£ä¸ºå¯†é›†çŸ©é˜µã€ï¼Œæ¯ä¸€å°ºåº¦æå–çš„ç‰¹å¾æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œ<br>ä½†æ˜¯ç»è¿‡ã€Œfilter concatenationã€è¿™æ­¥æ“ä½œåï¼Œè¾“å‡ºçš„ç‰¹å¾ä¸å†æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œ<strong>ç›¸å…³æ€§å¼ºçš„ç‰¹å¾ä¼šè¢«åŠ å¼ºï¼Œè€Œç›¸å…³æ€§å¼±çš„ç‰¹å¾ä¼šè¢«å¼±åŒ–</strong>ã€‚<em>è¿™ä¸ªç›¸å…³æ€§é«˜çš„èŠ‚ç‚¹åº”è¯¥è¢«è¿æ¥åœ¨ä¸€èµ·çš„ç»“è®ºï¼Œå³æ˜¯ä»ç¥ç»ç½‘ç»œçš„è§’åº¦å¯¹HebbianåŸç†æœ‰æ•ˆæ€§çš„è¯æ˜</em><br>ã€Œfilter concatenationã€ï¼Œè¿™ä¸€æ­¥å…¶å®ç›¸å½“äºæ²¿ç€æ·±åº¦æ–¹å‘ï¼ˆæˆ–è€…è¯´åœ¨depthè¿™ä¸ªç»´åº¦ï¼‰è¿›è¡Œæ‹¼æ¥ï¼Œ</p>
<blockquote>
<p>stack up the first volume to the second volume to make the dimensions match up â€¦â€¦ Output a single output vector forming the input of<br>next stageã€‚  </p>
</blockquote>
<p>ç»“åˆ<a href="https://becominghuman.ai/understanding-and-coding-inception-module-in-keras-eb56e9056b4b" target="_blank" rel="noopener">Udacityè§†é¢‘</a>å’Œcodeæ¥åŠ æ·±ä¸€ä¸‹å¯¹ã€Œfilter concatenationã€çš„ç†è§£</p>
<blockquote>
</blockquote>
<pre><code>concatenated_tensor = tf.concat(3,[branch1, branch2, branch3, branch 4])  
</code></pre><p><strong>E.g:</strong><br>{General}ï¼šè¾“å…¥ 28x28x192 volume ï¼Œå¹¶åˆ—ç»è¿‡ 1x1å·ç§¯æ“ä½œã€3x3å·ç§¯æ“ä½œã€5x5å·ç§¯æ“ä½œã€max-poolï¼Œåˆ†åˆ«å¾—åˆ°28x28x64ã€28x28x128ã€<br>28x28x32ã€28x28x32 volume, å°†å¹¶åˆ—çš„volumeæ²¿ç€æ·±åº¦æ–¹å‘è¿›è¡Œæ‹¼æ¥ï¼Œè¾“å‡º 28x28x256 volumeã€‚ </p>
<blockquote>
<p>Feifei-Liçš„cs231nçš„è¯¾ä»¶é‡Œæ˜¯æè¿°CNNçš„ï¼ševery layer of a ConvNet transforms one volume of activations to another through a differentiable function.We use three main types of layers to build ConvNet architectures:Convolutional Layer, Pooling Layer,<br>and Fully-Connected Layer.  Conv layer will compute <strong>the output of neurons</strong> that are connected to local regions in the input,<br>each computing a <strong>dot product between their weights</strong> and a small region they are connected to the input volume.<br>Pool layer will perform a downsampling operation along <strong>the spatial dimensions</strong>(<em>width,height</em>)<br>FC layer will compute the class score,resulting in volume of sizeã€Œ1x1x#classã€ã€‚</p>
</blockquote>
<p>{Specific}ï¼š5x5çš„å·ç§¯æ“ä½œå¾—åˆ°äº†28x28x32çš„blockã€‚<br>filter size =5x5x192ï¼Œ5 pixels width and height, 192 pixels depthï¼ˆfilterçš„æ·±åº¦éœ€è¦å’Œ<em>å‰ä¸€feature mapçš„æ·±åº¦</em>ä¿æŒä¸€è‡´ã€‚ï¼‰</p>
<p>è®¾input volume width = W,  the width of receptive field = F_w, zero padding on the border = P, stride = S<br>é‚£ä¹ˆoutput volume width = (W-F+2P)/S+1ã€‚åŒç†ä¹Ÿå¯ä»¥å¾—åˆ°output volume heightã€‚æ­¤å¤–, input volume depth = D1<br>æ­¤å¤–ï¼Œè¢«filterè¦†ç›–çš„å›¾åƒåŒºåŸŸç§°ä¸ºreceptive fieldï¼Œå…·ä½“æ“ä½œæ˜¯ï¼šslide each filter across the width and height of the input volume and compute dot products between the entries of the filter and the input at any positionï¼Œå³filterä¸­çš„å€¼å’ŒåŸå§‹å›¾åƒä¸­receptive fieldä¸­çš„åƒç´ å€¼è¿›è¡Œç‚¹ç§¯è¿ç®—ï¼Œäº§ç”Ÿactivation mapæˆ–feature mapã€‚<strong>å›¾åƒä¸€èˆ¬éƒ½æ˜¯å±€éƒ¨ç›¸å…³çš„</strong>ï¼Œ<br>ç¬¬n+1å±‚çš„æ¯ä¸ªç¥ç»å…ƒå’Œç¬¬nå±‚çš„receptive fieldä¸­çš„ç¥ç»å…ƒè¿æ¥ï¼Œè€Œä¸éœ€è¦å’Œç¬¬nå±‚çš„æ‰€æœ‰ç¥ç»å…ƒè¿æ¥ï¼ŒConvNetå…·æœ‰<strong>local connectivity(å±€éƒ¨è¿æ¥)</strong> çš„æ€§è´¨ã€‚å½“filterçš„receptive fieldè¶Šå¤§ï¼Œfilterèƒ½å¤Ÿå¤„ç†çš„åŸå§‹è¾“å…¥å†…å®¹çš„èŒƒå›´å°±è¶Šå¤§ã€‚éšç€ç»è¿‡æ›´å¤šçš„å·ç§¯å±‚ï¼Œå¾—åˆ°çš„æ¿€æ´»æ˜ å°„ä¹Ÿå°±å…·æœ‰æ›´ä¸ºå¤æ‚çš„ç‰¹å¾ã€‚  </p>
<p><img src="https://camo.githubusercontent.com/af3901794f951a95a46683687fa7a60f3d0f45d6/687474703a2f2f63733233316e2e6769746875622e696f2f6173736574732f636e6e2f6465707468636f6c2e6a706567" alt="4"></p>
<p>è®¾ number of filters = K, ä¹Ÿæ˜¯output volume depthçš„å€¼ã€‚å½“filterçš„æ•°ç›®è¶Šå¤šï¼Œspatial dimensionså°±ä¼šä¿ç•™çš„è¶Šå¥½ã€‚<br>CNNå…·æœ‰local connectionå’Œparameter sharingçš„ç‰¹ç‚¹ã€‚<br>æ¯ä¸ªfilterçš„æƒé‡çš„ä¸ªæ•° = F_w x F_h x D1, æ€»çš„æƒé‡ä¸ªæ•°= F_w x F_h x D1 x K</p>
<p>æˆ‘ä»¬å†åˆ†æä¸€ä¸‹<strong>compution cost</strong></p>
<blockquote>
<p>cs231n æŒ‡å‡ºï¼š the largest bottleneck to be aware of when constructing the ConvNet is the memory bottle neck.<br>we need to keep track of the intermediate volume size, the paramter size and the memory.<br><a href="http://cs231n.github.io/convolutional-networks/#conv" target="_blank" rel="noopener">Reference:cs231n</a>  </p>
</blockquote>
<p>ç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼Œä¸Šé¢çš„å›¾bç›¸æ¯”å›¾açš„ä¼˜åŠ¿åœ¨å“ªé‡ŒğŸ§ã€‚<br>1x1çš„å·ç§¯æ˜¯ä½œä¸ºç“¶é¢ˆå±‚çš„ä½œç”¨ï¼Œç”¨å¾ˆå°çš„è®¡ç®—é‡å¯ä»¥å¢åŠ ä¸€å±‚ç‰¹å¾å˜æ¢å’Œéçº¿æ€§å˜æ¢ã€‚<em>æ­¤å¤–ï¼Œä¸€èˆ¬æ¶‰åŠåˆ°æ”¹å˜é€šé“æ•°ï¼Œéƒ½ä¼šä½¿ç”¨1x1å·ç§¯æ“ä½œï¼Œ<br>ä¾‹å¦‚æ®‹å·®è¿æ¥å’ŒDenseè¿æ¥</em>  </p>
<blockquote>
<p>the bottleneck is usually the smallest part of something<br>æˆ‘ä»¬æ¥è®¡ç®—ä¸€ä¸‹å›¾aä¸­5x5çš„å·ç§¯æ“ä½œå¾—åˆ°äº†28x28x32çš„blockçš„æ—¶å€™ï¼Œæ‰€éœ€è¦çš„multiplesçš„æ¬¡æ•°ã€‚ä»¥åŠå›¾bä¸­å…ˆä½¿ç”¨1x1çš„å·ç§¯æ“ä½œå…ˆå¾—åˆ°28x28x16ï¼Œå†ä½¿ç”¨5x5çš„å·ç§¯æ“ä½œå¾—åˆ°äº†28x28x32çš„blcokçš„æ—¶å€™ï¼Œæ‰€éœ€è¦çš„multiplesçš„æ¬¡æ•°ã€‚  </p>
</blockquote>
<p>1.å›¾a (28x28x32) x (5x5x192) = 120million ã€Œä¸€ä¸ªoutput volumeæ‰€éœ€è¦çš„ä¹˜ç§¯æ¬¡æ•° x the number of output valuesã€ </p>
<p>2.å›¾b ï¼ˆ28x28x16) x (1x1x192) + (28x28x32) x (5x5x16) = 12.4 million  </p>
<p>ä»ä¸Šé¢ğŸ‘†ä¸¤ä¸ªå¯¹æ¯”å¯ä»¥çŸ¥é“1x1çš„å·ç§¯æ“ä½œå¤§å¤§çš„å‡å°‘äº†è®¡ç®—é‡ã€‚</p>
<h3 id="GoogleNetâ€™s-architecture"><a href="#GoogleNetâ€™s-architecture" class="headerlink" title="GoogleNetâ€™s architecture"></a>GoogleNetâ€™s architecture</h3><p>é¦–å…ˆï¼Œä¸ºäº†æœ‰ä¸€ä¸ªåˆæ­¥çš„å°è±¡ï¼Œå…ˆæˆªå–äº†GoogleNetçš„ä¸€éƒ¨åˆ†ï¼Œ<br><img src="https://mohitjainweb.files.wordpress.com/2018/06/googlenet-architecture-showing-the-side-connection.png?w=700" alt="2"><br>æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°è¿™é‡Œæœ‰ä¸€ä¸ªã€Œsoftmaxã€çš„åˆ†æ”¯ï¼Œæ•´ä¸ªç»“æ„ä¸­æœ‰ä¸¤ä¸ªã€Œsoftmaxã€ï¼Œå®ƒç›¸å½“äºè¾…åŠ©åˆ†ç±»å™¨ï¼Œç»“åˆcodeæˆ‘ä»¬å¯ä»¥çŸ¥é“è¯¥æ“ä½œæ˜¯å°†ä¸­é—´æŸä¸€å±‚çš„è¾“å‡ºç”¨ä½œåˆ†ç±»ï¼Œå¹¶æŒ‰ä¸€ä¸ªè¾ƒå°çš„æƒé‡ï¼ˆ0.3ï¼‰åŠ åˆ°æœ€ç»ˆåˆ†ç±»ç»“æœä¸­èµ·åˆ°çš„æ˜¯æ¢¯åº¦å‰å‘ä¼ è¾“çš„ä½œç”¨ã€‚è®ºæ–‡é‡Œæ˜¯è¿™ä¹ˆäº¤ä»£çš„ï¼š</p>
<blockquote>
<p>By adding auxiliary classifiers connected to these intermediate layers, we would expect to encourage discrimination in the lower stages in the classifier, increase the gradient signal that gets propagated back, and provide additional regularization.  </p>
</blockquote>
<p>å…¶æ¬¡ï¼Œä¸ºäº†å¯¹GoogleNetçš„ç»„æˆæœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå¼•ç”¨äº†è®ºæ–‡ä¸­çš„è¡¨æ ¼ï¼š<br><img src="https://camo.githubusercontent.com/f038213d9fa7c4c47ca36d7e51820f68462285d2/68747470733a2f2f696d672d626c6f672e6373646e2e6e65742f32303137303631323131303435383434343f77617465726d61726b2f322f746578742f6148523063446f764c324a736232637559334e6b626935755a585176625746796332706f5957383d2f666f6e742f3561364c354c32542f666f6e7473697a652f3430302f66696c6c2f49304a42516b46434d413d3d2f646973736f6c76652f37302f677261766974792f536f75746845617374" alt="3"><br>ä¸Šé¢è®¨è®ºæ—¶ï¼Œå·²ç»è¯´è¿‡GoogleNetæ˜¯æ¨¡å—åŒ–çš„ï¼Œå †å äº†å¤šä¸ªInception Moduleï¼Œé åçš„Inception Moduleèƒ½å¤ŸæŠ½å–æ›´é«˜é˜¶çš„æŠ½è±¡çš„ç‰¹å¾ã€‚</p>
<h2 id="Batch-Normalization"><a href="#Batch-Normalization" class="headerlink" title="Batch Normalization"></a>Batch Normalization</h2><h3 id="Internal-covariate-shift"><a href="#Internal-covariate-shift" class="headerlink" title="Internal covariate shift"></a>Internal covariate shift</h3><p>â€œInternalâ€æŒ‡çš„æ˜¯ç¥ç»ç½‘ç»œçš„éšå«å±‚ï¼Œâ€Covariateâ€æŒ‡çš„æ˜¯è¾“å…¥çš„æƒé‡å‚æ•°åŒ–ï¼Œâ€œInternal Covariate Shiftâ€æŒ‡çš„æ˜¯<br>åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œè¾“å…¥çš„æ¦‚ç‡åˆ†å¸ƒä¸å›ºå®šï¼Œç½‘ç»œçš„å‚æ•°åœ¨ä¸æ–­çš„å˜åŒ–ï¼Œç¥ç»ç½‘ç»œçš„éšå«å±‚ä¹Ÿè¦ä¸æ–­çš„å»ã€Œé€‚åº”ã€æ–°çš„åˆ†å¸ƒã€‚<br>è¿™ä¸ªç°è±¡ä¼šè®©æ¨¡å‹æ›´åŠ éš¾è®­ç»ƒï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ›´åŠ è°¨æ…çš„åˆå§‹åŒ–æ¨¡å‹å‚æ•°å’Œå­¦ä¹ ç‡ã€‚å› æ­¤ä½œè€…å¼•å…¥äº†<em>Normalization</em> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ </p>
<h3 id="Normalization"><a href="#Normalization" class="headerlink" title="Normalization"></a>Normalization</h3><p>é€šè¿‡è§„èŒƒåŒ–çš„æ‰‹æ®µï¼Œå°†æ¯å±‚ç¥ç»ç½‘ç»œä»»æ„ç¥ç»å…ƒè¿™ä¸ªè¾“å…¥å€¼çš„åˆ†å¸ƒâ€œå¼ºè¡Œæ‹‰å›â€åˆ°å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º1çš„åˆ†å¸ƒä¸­.å¸¸è§„çš„æ­£åˆ™åŒ–å…¬å¼ä¸ºï¼š$\hat{x}^{k}=\frac{x^{k}-E(x^{k})}{\sqrt{var(x^{k})}}$<br>è¿™ä¹ˆåšçš„ä¼˜ç‚¹æ˜¯å¯ä»¥åŠ å¿«æ”¶æ•›çš„é€Ÿåº¦ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å‡å¦‚è¯¥å±‚çš„å„ä¸ªç‰¹å¾äº’ä¸ç›¸å…³ï¼Œç®€å•çš„æ­£åˆ™åŒ–æ“ä½œå¯èƒ½ä¼šæ”¹å˜è¯¥å±‚çš„ç‰¹å¾è¡¨è¾¾ã€‚<br>ä¸ºäº†ç¡®ä¿ç¥ç»ç½‘ç»œé‡Œé¢å¯ä»¥è¿›è¡Œæ’ç­‰å˜æ¢(identity transform)ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¸¸è§„çš„æ­£åˆ™åŒ–å…¬å¼è¿›è¡Œæ”¹å˜ã€‚ç”±æ­¤æˆ‘ä»¬ä¹Ÿå¼•å…¥äº†Batch Normalization:$BN_{\gamma,\beta}$ã€‚ $y^{k}=\gamma^{k}\hat{x^{k}}$;$\beta^{k}$<br>å…¶ä¸­æ¯ä¸€ä¸ªactivationéƒ½ä¼šå¼•å…¥ä¸¤ä¸ªè¶…å‚æ•°$\gamma,\beta$ã€‚è¿™ä¸¤ä¸ªå‚æ•°ä¹Ÿæ˜¯ç¥ç»ç½‘ç»œéœ€è¦å­¦ä¹ çš„å‚æ•°ï¼Œåˆ†åˆ«èµ·åˆ°çš„æ˜¯scaleå’Œshiftçš„ä½œç”¨ã€‚ç›¸å½“äºåœ¨åŸæ¥æ­£åˆ™åŒ–çš„åŸºç¡€ä¸Šï¼Œå†è¿›è¡Œäº†ä¸€æ¬¡çº¿æ€§å˜åŒ–ã€‚åœ¨mini-batchçš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒBNæ˜¯è§„èŒƒåŒ–äº†æ¯ä¸€å±‚çš„è¾“å…¥ï¼Œ$z=g(BN(W,u))$  ã€Œgè¡¨ç¤ºçš„éçº¿æ€§æ“ä½œï¼Œä¾‹å¦‚ï¼šreluã€ï¼Œä»è€Œå‡å°‘äº†Internal Covariate shiftçš„å¹²æ‰°ã€‚</p>
<blockquote>
<p>the inputs to each layer are affected by the parameters of all preceding layers - so that small<br>changes to the network parameters amplify as the network becomes deeper â€¦â€¦ Fixed distribution of inputs to a<br>sub-network would have a positive consequences for the layers outside the network, as well.  æ­¤å¤–ï¼ŒBNçš„åˆ›æ–°ä¹Ÿåœ¨äº<br>applied to the sub-networks and layers, incorporate the normalization in the network architecture as wellã€‚  </p>
</blockquote>
<p>Batch Normalizationä¸ä»…å…è®¸ä¸é‚£ä¹ˆè°¨æ…çš„åˆå§‹åŒ–ï¼Œè¿˜å…è®¸ä½¿ç”¨æ›´é«˜çš„learning rateã€‚</p>
<h2 id="Rethinking-the-Inception-Architecture-for-Computer-vision"><a href="#Rethinking-the-Inception-Architecture-for-Computer-vision" class="headerlink" title="Rethinking the Inception Architecture for Computer vision"></a>Rethinking the Inception Architecture for Computer vision</h2><p>å› ä¸ºè®¡ç®—å¼€é”€ã€å‚æ•°é‡é™åˆ¶äº†æŠŠInceptionéƒ¨ç½²åˆ°ç§»åŠ¨ç«¯å’Œä¸€äº›åœºæ™¯ä¸­ï¼Œåœ¨abstracté‡Œï¼Œä½œè€…æŒ‡å‡ºäº†å¯¹ç½‘ç»œæ„æ¶è¿›è¡Œæ”¹è¿›çš„æ€è·¯ã€‚</p>
<blockquote>
<p>Here we are exploring ways to scale up networks in ways that aim at utilizing the added computation as efficiently as possible by <strong>factorized convolutions and aggressive regularization</strong>.</p>
</blockquote>
<h3 id="å·ç§¯æ ¸çš„å› å¼åˆ†è§£"><a href="#å·ç§¯æ ¸çš„å› å¼åˆ†è§£" class="headerlink" title="å·ç§¯æ ¸çš„å› å¼åˆ†è§£"></a>å·ç§¯æ ¸çš„å› å¼åˆ†è§£</h3><p>Paperé‡Œæ¢ç´¢äº†å‡ å¼ å°†è¾ƒå¤§çš„å·ç§¯æ ¸åˆ†è§£ä¸ºè¾ƒå°çš„å·ç§¯æ ¸çš„è®¾ç½®æ–¹å¼ã€‚ä¾‹å¦‚ï¼š5x5çš„å·ç§¯æ ¸æ›¿æ¢ä¸ºä¸¤ä¸ª3x3çš„å·ç§¯æ ¸ï¼›3x3çš„å·ç§¯æ ¸æ›¿æ¢ä¸º1x3å’Œ3x1çš„å·ç§¯æ ¸ã€‚è¿™æ ·å…·æœ‰ç›¸åŒçš„receptive fieldçš„åŒæ—¶å¯ä»¥å¤§å¤§çš„å‡å°è®¡ç®—å¼€é”€ã€‚</p>
<p><img src="https://tse2.mm.bing.net/th?id=OIP.lEHUl5w_rweJSb-FpNdKeAHaFl&amp;pid=Api" alt="1">  </p>
<p><img src="http://davidstutz.de/wordpress/wp-content/uploads/2017/03/inception_arch_3.png" alt="2">  </p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ã€Œnxnçš„å·ç§¯è¢«æ›¿æ¢ä¸º1xnå’Œnx1çš„å·ç§¯ã€çš„è¿™ç§ç©ºé—´ä¸Šåˆ†è§£ä¸ºéå¯¹ç§°å·ç§¯çš„åšæ³•åœ¨å‰é¢å‡ å±‚layerçš„æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œæ›´é€‚ç”¨äºä¸­ç­‰è§„æ ¼å¤§å°çš„feature mapï¼Œï¼ˆmçš„èŒƒå›´ä»12åˆ°20ï¼‰ã€‚<br>æ­¤å¤–æˆ‘ä»¬è¿˜è¦æ€è€ƒğŸ¤”å‡ ä¸ªé—®é¢˜ã€‚<br>1.ç”¨å°å·ç§¯æ ¸æ›¿æ¢å¤§å·ç§¯æ ¸ï¼Œæ˜¯å¦ä¼šå¸¦æ¥ä¿¡æ¯æŸå¤±(loss of expressiveness)? ä¸ä¼šï¼Œåªè¦å¤šæ¬¡å åŠ çš„å°å·ç§¯æ ¸å’Œå¼€å§‹çš„å¤§å·ç§¯æ ¸å…·æœ‰ç›¸åŒçš„receptive fieldã€‚<br>2.å¦‚æœæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯¹è®¡ç®—å¼€é”€ä¸­çš„çº¿æ€§éƒ¨åˆ†è¿›è¡Œå› å¼åˆ†è§£ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨ç¬¬ä¸€æ¬¡ä¿æŒçº¿æ€§æ¿€æ´»ï¼ˆlinear activationï¼‰ï¼Ÿå› ä¸ºåœ¨å®éªŒä¸­è¡¨æ˜ï¼Œéçº¿æ€§æ¿€æ´»æ€§èƒ½æ›´å¥½ã€‚</p>
<h3 id="Label-Smoothing-Regularization"><a href="#Label-Smoothing-Regularization" class="headerlink" title="Label Smoothing Regularization"></a>Label Smoothing Regularization</h3><p>å› ä¸ºå¤§å¤šæ•°çš„æ•°æ®é›†éƒ½å­˜åœ¨é”™è¯¯çš„æ ‡ç­¾ï¼Œ ä½†æ˜¯minimize the cost function on the wrong labels can be harmfulã€‚å› æ­¤åœ¨Model Regularizationä¸­ï¼Œå¯ä»¥é€šè¿‡åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ä¸»åŠ¨åŠ å…¥å™ªå£°ä½œä¸ºpenaltyï¼Œè¿™æ ·çš„æ¨¡å‹å…·æœ‰noise Robustnessã€‚Label Smoothing Regularization(LSR)æ˜¯å…¶ä¸­çš„ä¸€ç§regularizationçš„æ–¹æ³•ã€‚</p>
<blockquote>
<p>Here we propose a mechanism to regularize the classifier layer by estimating the marginalized effect of label-dropout during<br>training.   </p>
</blockquote>
<p>{<em>ä¸¾ä¸€ä¸ªUniversity of Waterlooçš„WAVE LABçš„ ME 780ä¸­lecture 3ï¼šRegularization for deep modelsçš„ä¾‹å­æ¥å¸®åŠ©ç†è§£</em>ï¼š<br><em>ground-truth:</em>   y1_label=[1,0,0,â€¦â€¦ï¼Œ0]<br><em>prediction:</em>   ç»è¿‡softmax classifierå¾—åˆ°çš„softmax output:  y1_out=[0.87,0.001,0.04â€¦â€¦,0.03]. }  </p>
<blockquote>
<p>maximum likelihood learning with softmax classifier and hard targets may actually never converge, the softmax can<br>never predict a probability of exactly 0 or 1, so it will continue to learn larger and larger weights, making more<br>extreme predictions.  </p>
</blockquote>
<p>å‡è®¾xä¸ºtraining exampleï¼Œ$p(k|x)$ä¸ºxå±äºã€Œlabel kã€çš„æ¦‚ç‡ï¼Œ$q(k|x)$ä¸ºxå±äºã€Œground-truth labelã€çš„æ¦‚ç‡ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå¿½ç•¥äº†på’Œqåœ¨example xä¸Šçš„ç›¸å…³æ€§ã€‚</p>
<p>ç›®æ ‡å‡½æ•°ï¼šã€Œæœ€å°åŒ–äº¤å‰ç†µã€ã€‚å› ä¸ºäº¤å‰ç†µè¡¡é‡çš„æ˜¯ä¸¤ä¸ªåˆ†å¸ƒï¼ˆpå’Œqï¼‰çš„ç›¸ä¼¼æ€§ï¼Œæœ€å°åŒ–ç›®æ ‡å‡½æ•°æ˜¯ä¸ºäº†è®©é¢„æµ‹çš„labelæ¦‚ç‡åˆ†å¸ƒ$p(k|x)$ï¼ˆå³ä¾‹å¦‚ä¸Šé¢çš„softmaxçš„è¾“å‡ºï¼‰å’Œground-truth labelçš„æ¦‚ç‡åˆ†å¸ƒ$q(k|x)$å°½å¯èƒ½çš„æ¥è¿‘ã€‚ã€Œæœ€å°åŒ–äº¤å‰ç†µã€ä¹Ÿç­‰ä»·ä¸ºã€Œæœ€å¤§åŒ–ä¼¼ç„¶å‡½æ•°ã€ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸ªç›®æ ‡å‡½æ•°è¿›è¡Œäº†æ”¹è¿›ã€‚å› ä¸ºåœ¨å•ç±»æƒ…å†µä¸‹ï¼Œå•ä¸€çš„äº¤å‰ç†µå¯¼è‡´æ ·æœ¬å±äºæŸä¸ªç±»åˆ«çš„æ¦‚ç‡éå¸¸å¤§ï¼Œæ¨¡å‹å¤ªè¿‡ä¸è‡ªä¿¡è‡ªå·±çš„åˆ¤æ–­ã€‚è¿™æ ·ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆï¼Œæ­¤å¤–è¿˜ä¼šé™ä½æ¨¡å‹çš„é€‚åº”èƒ½åŠ›ã€‚ä¸ºäº†é¿å…æ¨¡å‹è¿‡äºè‡ªä¿¡ï¼Œå¼•å…¥äº†ä¸€ä¸ªç‹¬ç«‹äºæ ·æœ¬åˆ†å¸ƒçš„å˜é‡u(k)ï¼Œè¿™ç›¸å½“äºåœ¨ground-truth distributionä¸­åŠ å…¥äº†å™ªå£°ï¼Œç»„æˆä¸€ä¸ªæ–°çš„åˆ†å¸ƒã€‚åœ¨å®éªŒä¸­ï¼Œä½¿ç”¨çš„æ˜¯å‡åŒ€åˆ†å¸ƒ(uniform distribution)ä»£æ›¿äº†u(k)</p>
<blockquote>
<p>we propose a mechanism for encouraging the model to be less confident. While this may not be desired if the goal is to maximize the log-likelihood of training labels, it does regularize the model and makes it more adaptable â€¦â€¦ we refer to this<br>change in ground-truth label distribution as label-smoothing regularization, or LSR.  </p>
</blockquote>
<h2 id="Resnet"><a href="#Resnet" class="headerlink" title="Resnet"></a>Resnet</h2><h3 id="introduction"><a href="#introduction" class="headerlink" title="introduction"></a>introduction</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ¨¡å‹çš„æ·±åº¦åŠ æ·±ï¼Œå­¦ä¹ èƒ½åŠ›å¢å¼ºï¼Œä½†æ˜¯ä¸èƒ½ç®€å•çš„å¢åŠ ç½‘ç»œçš„æ·±åº¦ï¼Œå¦åˆ™ä¼šå‡ºç°éšç€ç½‘ç»œæ·±åº¦å¢åŠ ï¼Œtraining errorå’Œtest errorå˜é«˜çš„ç°è±¡ã€‚è¿™ä¹Ÿè¯´æ˜ç½‘ç»œç»“æ„å˜å¤æ‚æ—¶ï¼Œoptimizationå˜å¾—æ›´åŠ å›°éš¾ã€‚<br>Kaiming Heæå‡ºäº†æ·±åº¦æ®‹å·®å­¦ä¹ ï¼ˆdeep residual learning frameworkï¼‰,é€šè¿‡ç½‘ç»œç»“æ„çš„åˆ›æ–°æ¥æœ‰æ•ˆçš„è§£å†³äº†ä¸Šè¿°çš„æ¢¯åº¦å¼¥æ•£ç°è±¡(degradation)ã€‚</p>
<h3 id="ç½‘ç»œç»“æ„"><a href="#ç½‘ç»œç»“æ„" class="headerlink" title="ç½‘ç»œç»“æ„"></a>ç½‘ç»œç»“æ„</h3><p><img src="https://camo.githubusercontent.com/6766d20252ed7afb1b3e17d92f38020da2328f5e/68747470733a2f2f696d672d626c6f672e6373646e2e6e65742f32303137303232303230313132383933383f77617465726d61726b2f322f746578742f6148523063446f764c324a736232637559334e6b626935755a58517664334e77596d453d2f666f6e742f3561364c354c32542f666f6e7473697a652f3430302f66696c6c2f49304a42516b46434d413d3d2f646973736f6c76652f37302f677261766974792f43656e746572" alt="1">  </p>
<p>ä»ä»¥ä¸‹ä¸¤ç‚¹æ¥åˆ†æç½‘ç»œç»“æ„çš„åˆ›æ–°  </p>
<ul>
<li><strong><em>shortcut connection</em></strong><br>æ®‹å·®çš„ç½‘ç»œç»“æ„æ˜¯å‰å‘ç¥ç»ç½‘ç»œ+shortcutã€‚ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºåœ¨å·²æœ‰çš„ç½‘ç»œç»“æ„ä¸­å¢åŠ äº†ä¸€ä¸ªbranchï¼Œèµ·åˆ°çš„æ˜¯æ’ç­‰æ˜ å°„ï¼ˆidentity mappingï¼‰çš„ä½œç”¨ï¼Œè¿™æ ·ä¿è¯äº†ä¸€ä¸ªæ·±åº¦æ¨¡å‹çš„training erroræœ€èµ·ç ä¿è¯shallow counterpartæ¨¡å‹çš„training erroræ˜¯ä¸€è‡´çš„ï¼Œé”™è¯¯ç‡ä¸ä¼šé«˜äºæµ…å±‚ã€‚æ­¤å¤–ï¼Œè¿™ç§åšæ³•æ—¢ä¸ä¼šå¢åŠ é¢å¤–çš„å‚æ•°ä¹Ÿä¸ä¼šå¢åŠ é¢å¤–çš„è®¡ç®—é‡ã€‚</li>
<li><strong><em>residual representations</em></strong><br>ä¸¤ç§å‡½æ•°çš„è¡¨è¾¾æ•ˆæœæ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯ä¼˜åŒ–çš„éš¾åº¦æ˜¯ä¸åŒçš„ã€‚å¯¹æ®‹å·®è¿›è¡Œæ‹Ÿåˆæ˜¾ç„¶è¦æ›´åŠ å®¹æ˜“ã€‚<br>æ®‹å·®å‡½æ•°  $F(x):=H(x)-x$ã€‚å¼•å…¥æ®‹å·®åçš„æ˜ å°„å¯¹è¾“å‡ºçš„å˜åŒ–æ›´åŠ æ•æ„Ÿï¼Œå¦‚H(5)=5.1,F(5)=0.1, è¾“å‡ºä»5.1å˜åŒ–åˆ°5.2ï¼Œå¢åŠ çš„å¹…åº¦ä¸º2%ï¼Œä½†æ˜¯æ®‹å·®æ˜¯ä»0.1å˜åŒ–åˆ°0.2ï¼Œå¢åŠ å¹…åº¦ä¸º100%ã€‚<em>æ®‹å·®çš„æ€æƒ³å°±æ˜¯å»é™¤ç›¸åŒçš„ä¸»ä½“éƒ¨åˆ†ï¼Œçªå‡ºå¾®å°çš„å˜åŒ–</em>ã€‚  </li>
</ul>
<h3 id="è®¡ç®—å…¬å¼"><a href="#è®¡ç®—å…¬å¼" class="headerlink" title="è®¡ç®—å…¬å¼"></a>è®¡ç®—å…¬å¼</h3><p>$${y}=F({x},{W_i})+W_s{x}$$<br>å…¶ä¸­$F({x},{W_i})$å’Œ$x$æ˜¯éœ€è¦å­¦ä¹ çš„æ®‹å·®æ˜ å°„ï¼Œåœ¨è®¡ç®—çš„æ—¶å€™éœ€è¦ä¿è¯ç»´æ•°ä¸€è‡´ï¼Œè€ƒè™‘åˆ°åœ¨ä¸¤ä¸ªfeature map ä¸­è¿›è¡Œé€å…ƒç´ ç›¸åŠ ï¼ˆelement-wise addition)ã€‚å½“ç»´æ•°ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œé€šè¿‡å¼•å…¥çº¿æ€§æ˜ å°„W_sæ¥åŒ¹é…ç»´åº¦</p>
<p>æœ€ç»ˆå–å¾—çš„æ•ˆæœæ˜¯ï¼š</p>
<blockquote>
<p>these residual networks are easier to optimize, and can gain accuracy from considerably increased depth.</p>
</blockquote>
<h2 id="Inception-Resnet"><a href="#Inception-Resnet" class="headerlink" title="Inception-Resnet"></a>Inception-Resnet</h2><p>å› ä¸ºResidual connectionsåœ¨è®­ç»ƒæ·±åº¦ç½‘ç»œæ—¶ï¼Œååˆ†æœ‰ä¼˜åŠ¿ï¼Œå†åŠ ä¸Šinceptionç½‘ç»œçš„æ·±åº¦ä¹Ÿæ¯”è¾ƒæ·±ï¼Œæ‰€ä»¥ä½œè€…å°è¯•å°†ä¸¤ç§æ–¹æ³•ç»“åˆèµ·æ¥ã€‚æ›´ç¡®åˆ‡çš„è¯´æ˜¯ï¼Œå°†Inceptionä¸­çš„filter concatenationä¸­çš„ä¸€éƒ¨åˆ†æ›¿æ¢ä¸ºresidual connectionsçš„ç»“æ„ã€‚ç»“åˆäº†residual connectionçš„inceptionæ¨¡å—å¦‚ä¸‹æ‰€ç¤ºï¼š  </p>
<p><img src="https://camo.githubusercontent.com/8c540abfc8714b56027ee7545f56967263c1b74a/68747470733a2f2f706963312e7a68696d672e636f6d2f76322d34393234373065313638376531653534373135366565393033363462346636305f722e6a7067" alt="2">   </p>
<p>ä½†æ˜¯å¼•å…¥residual connectionåï¼Œç½‘ç»œå¤ªæ·±ï¼Œç¨³å®šæ€§ä¸å¥½ï¼Œå› æ­¤å†æ¬¡åšäº†ä¿®æ”¹ã€‚<br><img src="https://camo.githubusercontent.com/ade4e987c83d1aa34417a65032bfa073112ebb39/68747470733a2f2f706963322e7a68696d672e636f6d2f38302f76322d64363535373237343964313535336639636366353062636136353961366666645f68642e6a7067" alt="3"><br>å›¾ä¸­inceptionæ¡†å¯ä»¥ç”¨ä»»æ„å…¶ä»–subnetworkæ›¿ä»£ï¼Œä½†æ˜¯è¿™æ¬¡ä¿®æ”¹æ˜¯åœ¨è¾“å‡ºåå¼•å…¥äº†ç¼©æ”¾ç³»æ•°(scale),å†ç›¸åŠ å’Œæ¿€æ´»ã€‚<br>æ–‡ç« æå‡ºäº†ä¸¤ä¸ªç‰ˆæœ¬ï¼šInception-ResNet v1å’ŒInception-ResNet v2ï¼Œç›¸æ¯”åŸæ¥ï¼ŒåŠ å¿«è®­ç»ƒçš„æ”¶æ•›é€Ÿåº¦ã€‚åœ¨å›¾åƒè¯†åˆ«ï¼Œè§†é¢‘æ£€æµ‹ç­‰é¢†åŸŸéƒ½ä½œä¸ºäº†base-networkã€‚</p>
<blockquote>
<p>In the experimental section we demonstrate that it is not very difficult to train competitive very deep networks without utilizing residual connections. However the use of residual connections seems to <strong><em>improve the training speed greatly</em></strong>, which is alone a great argument for their use.  </p>
</blockquote>

      
    </div>
    
    
    

    

    

    
      <div>
        
            <div>
	
		<div style="text-align:center;color: #ccc;font-size:14px">----------------------
æœ¬æ–‡ç»“æŸ----------------------</div>
	
</div>
        
      </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/å…¥é—¨/" rel="tag"><i class-"fa="" fa-tag"=""></i>å…¥é—¨</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/12/16/loss/" rel="prev" title="FAIRè§†è§‰è®ºæ–‡é›†é”¦">
                FAIRè§†è§‰è®ºæ–‡é›†é”¦ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
<div class="addthis_inline_share_toolbox">
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=pubid=ra-5c392c3b907a4377" async="async"></script>
</div>

      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="Hang Yang">
            
              <p class="site-author-name" itemprop="name">Hang Yang</p>
              <p class="site-description motion-element" itemprop="description">åœ¨é˜³å…‰ç¿çƒ‚çš„æ—¥å­é‡Œå¼€æ€€å¤§ç¬‘</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atmol.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/hangcheers" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="csuyanghang@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#GoogleNet"><span class="nav-number">1.</span> <span class="nav-text">GoogleNet</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Introduction-amp-Motivation"><span class="nav-number">1.1.</span> <span class="nav-text">Introduction &amp; Motivation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Inception-module"><span class="nav-number">1.2.</span> <span class="nav-text">Inception module</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GoogleNetâ€™s-architecture"><span class="nav-number">1.3.</span> <span class="nav-text">GoogleNetâ€™s architecture</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Batch-Normalization"><span class="nav-number">2.</span> <span class="nav-text">Batch Normalization</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Internal-covariate-shift"><span class="nav-number">2.1.</span> <span class="nav-text">Internal covariate shift</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Normalization"><span class="nav-number">2.2.</span> <span class="nav-text">Normalization</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rethinking-the-Inception-Architecture-for-Computer-vision"><span class="nav-number">3.</span> <span class="nav-text">Rethinking the Inception Architecture for Computer vision</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å·ç§¯æ ¸çš„å› å¼åˆ†è§£"><span class="nav-number">3.1.</span> <span class="nav-text">å·ç§¯æ ¸çš„å› å¼åˆ†è§£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Label-Smoothing-Regularization"><span class="nav-number">3.2.</span> <span class="nav-text">Label Smoothing Regularization</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Resnet"><span class="nav-number">4.</span> <span class="nav-text">Resnet</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#introduction"><span class="nav-number">4.1.</span> <span class="nav-text">introduction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç½‘ç»œç»“æ„"><span class="nav-number">4.2.</span> <span class="nav-text">ç½‘ç»œç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è®¡ç®—å…¬å¼"><span class="nav-number">4.3.</span> <span class="nav-text">è®¡ç®—å…¬å¼</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inception-Resnet"><span class="nav-number">5.</span> <span class="nav-text">Inception-Resnet</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hang Yang</span>

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i> è®¿é—®äººæ•°
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      äºº
    </span>
  

  
</div>








        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<script type="text/javascript" src="/js/src/love.js"></script>